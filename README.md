# FulmonyX-16 OS

ä¸€ä¸ªç”¨ C å’Œæ±‡ç¼–ç¼–å†™çš„ 16 ä½å®æ¨¡å¼æ“ä½œç³»ç»Ÿ,å…·æœ‰å›¾å½¢ç•Œé¢å’Œä¸­æ–­å¤„ç†åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¨ **VGA å›¾å½¢æ¨¡å¼** - æ”¯æŒ 320Ã—200 åˆ†è¾¨ç‡,256 è‰²æ˜¾ç¤º
- âŒ¨ï¸ **ä¸­æ–­å¤„ç†ç³»ç»Ÿ** - å®Œæ•´çš„é”®ç›˜ä¸­æ–­å¤„ç†æœºåˆ¶
- ğŸ”§ **è‡ªå®šä¹‰å¼•å¯¼ç¨‹åº** - ä»ç£ç›˜åŠ è½½å†…æ ¸
- ğŸ¯ **å›¾å½¢ç»˜åˆ¶** - æ”¯æŒç»˜åˆ¶åƒç´ ã€çº¿æ¡ã€çŸ©å½¢å’Œåœ†å½¢
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡** - æ¸…æ™°çš„ä»£ç ç»“æ„,æ˜“äºæ‰©å±•

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### å¼€å‘ç¯å¢ƒ

- **æ±‡ç¼–å™¨**: NASM (Netwide Assembler)
- **ç¼–è¯‘å™¨**: GCC (æ”¯æŒ 16 ä½ä»£ç ç”Ÿæˆ)
- **é“¾æ¥å™¨**: GNU ld
- **æ„å»ºå·¥å…·**: GNU Make
- **è™šæ‹Ÿæœº**: QEMU (ç”¨äºæµ‹è¯•)

### å·¥å…·é“¾å®‰è£…

```bash
# Debian/Ubuntu
sudo apt install nasm gcc make qemu-system-x86

# Arch Linux
sudo pacman -S nasm gcc make qemu

# macOS
brew install nasm gcc make qemu
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘

```bash
make clean && make
```

### è¿è¡Œ

```bash
make run
```

### è°ƒè¯•æ¨¡å¼

```bash
make debug
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
FulmonyX-16/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ bootloader/
â”‚   â”‚   â””â”€â”€ bootloader.asm      # å¼•å¯¼æ‰‡åŒºä»£ç 
â”‚   â”œâ”€â”€ kernel/
â”‚   â”‚   â”œâ”€â”€ kernel.asm          # å†…æ ¸æ±‡ç¼–å…¥å£
â”‚   â”‚   â”œâ”€â”€ kernel.c            # å†…æ ¸ C ä»£ç 
â”‚   â”‚   â”œâ”€â”€ interrupt.c         # ä¸­æ–­å¤„ç†å®ç°
â”‚   â”‚   â””â”€â”€ interrupt_asm.asm   # ä¸­æ–­æ±‡ç¼–åŒ…è£…å™¨
â”‚   â””â”€â”€ ld-kernel.ld            # é“¾æ¥è„šæœ¬
â”œâ”€â”€ inc/
â”‚   â””â”€â”€ kernel/
â”‚       â”œâ”€â”€ graphics.h          # å›¾å½¢ç»˜åˆ¶å‡½æ•°
â”‚       â”œâ”€â”€ interrupt.h         # ä¸­æ–­å¤„ç†æ¥å£
â”‚       â”œâ”€â”€ io.h                # ç«¯å£ I/O å‡½æ•°
â”‚       â””â”€â”€ types.h             # ç±»å‹å®šä¹‰
â”œâ”€â”€ out/                        # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ makefile                    # æ„å»ºè„šæœ¬
â””â”€â”€ FulmonyX-16.iso            # å¯å¯åŠ¨é•œåƒ
```

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### å†…å­˜å¸ƒå±€

```
0x00000 - 0x7BFFF: å¯ç”¨å†…å­˜
0x07C00 - 0x07DFF: å¼•å¯¼æ‰‡åŒº (512 å­—èŠ‚)
0x07E00 - 0x9FFFF: å¯ç”¨å†…å­˜
0x10000 - 0x1FFFF: å†…æ ¸åŠ è½½åŒºåŸŸ (64KB)
```

### ä¸­æ–­å¤„ç†

- **ä¸­æ–­å‘é‡è¡¨ (IVT)**: ä½äºç‰©ç†åœ°å€ `0x0000:0x0000`
- **é”®ç›˜ä¸­æ–­**: IRQ 1 â†’ INT 0x09
- **ä¸­æ–­æµç¨‹**:
  1. ç¡¬ä»¶è§¦å‘ä¸­æ–­
  2. CPU æŸ¥æ‰¾ IVT
  3. è·³è½¬åˆ° ISR åŒ…è£…å™¨
  4. ä¿å­˜å¯„å­˜å™¨çŠ¶æ€
  5. è°ƒç”¨ C å¤„ç†å‡½æ•°
  6. å‘é€ EOI ç»™ PIC
  7. æ¢å¤å¯„å­˜å™¨å¹¶è¿”å›

### å›¾å½¢ç³»ç»Ÿ

- **æ¨¡å¼**: VGA æ¨¡å¼ 0x13 (320Ã—200, 256 è‰²)
- **ç»˜å›¾å‡½æ•°**:
  - `put_pixel(x, y, color)` - ç»˜åˆ¶å•ä¸ªåƒç´ 
  - `draw_line(x0, y0, x1, y1, color)` - ç»˜åˆ¶ç›´çº¿
  - `draw_rectangle(x, y, w, h, color)` - ç»˜åˆ¶çŸ©å½¢
  - `draw_circle(x, y, r, color)` - ç»˜åˆ¶åœ†å½¢

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ä¸­æ–­å¤„ç†ç¨‹åº

1. åœ¨ `interrupt_asm.asm` ä¸­åˆ›å»º ISR åŒ…è£…å™¨
2. åœ¨ `kernel.c` ä¸­å®ç° C å¤„ç†å‡½æ•°
3. åœ¨ `kernel_main()` ä¸­æ³¨å†Œä¸­æ–­å¤„ç†ç¨‹åº

ç¤ºä¾‹:
```c
// å®šä¹‰å¤„ç†å‡½æ•°
void my_interrupt_handler() {
    // å¤„ç†é€»è¾‘
}

// æ³¨å†Œåˆ° IVT
register_interrupt_handler(0x??, my_isr_wrapper);
```

### æ‰©å±•å›¾å½¢åŠŸèƒ½

åœ¨ `graphics.h` ä¸­æ·»åŠ æ–°çš„ç»˜å›¾å‡½æ•°:

```c
void draw_my_shape(int x, int y, int size, unsigned char color) {
    // ä½¿ç”¨ put_pixel() å®ç°
}
```

## ğŸ› æ•…éšœæ’é™¤

### ç¼–è¯‘é”™è¯¯

- **æ‰¾ä¸åˆ° NASM**: ç¡®ä¿ NASM å·²å®‰è£…å¹¶åœ¨ PATH ä¸­
- **GCC ä¸æ”¯æŒ -m16**: éœ€è¦è¾ƒæ–°ç‰ˆæœ¬çš„ GCC

### è¿è¡Œé—®é¢˜

- **QEMU æ— æ³•å¯åŠ¨**: æ£€æŸ¥é•œåƒæ–‡ä»¶æ˜¯å¦ç”Ÿæˆ
- **é»‘å±**: æ£€æŸ¥å¼•å¯¼æ‰‡åŒºæ˜¯å¦æ­£ç¡® (æœ«å°¾åº”ä¸º 0x55AA)
- **ä¸­æ–­ä¸å·¥ä½œ**: ç¡®ä¿ IVT æ­£ç¡®è®¾ç½®,DS æ®µå¯„å­˜å™¨ä¸º 0

## ğŸ‘¨â€ğŸ’» ä½œè€…

FulmonyX
<a href="https://bilibili.com">Bilibili</a> id: 3546771447875824
<a href="https://luogu.com.cn">Luogu</a> id: 1546189
<a href="https://leetcode.cn">Leetcode</a> id: avvesome-bardeenpuu

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ•™è‚²æ€§è´¨çš„æ“ä½œç³»ç»Ÿé¡¹ç›®,ä»…ç”¨äºå­¦ä¹ ç›®çš„ã€‚
